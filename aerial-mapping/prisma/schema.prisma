// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userID             Int     @id @unique @default(autoincrement())
  user_email         String  @unique
  user_password      String
  user_password_salt String
  user_name          String
  user_surname       String
  user_role          String  @default("user")
  user_approved      Boolean @default(false)

  Flight_Details Flight_Details[]
}

model Images {
  imageID          Int              @id @unique @default(autoincrement())
  collectionID     Int
  Image_Collection Image_Collection @relation(fields: [collectionID], references: [collectionID])
  bucket_name      String           @db.VarChar(100)
  file_name        String           @db.VarChar(100)
}

model Flight_Details {
  flightID      Int    @id @unique @default(autoincrement())
  flight_height Float
  flight_type   String @db.VarChar(45)
  pilotID       Int
  pilot         User   @relation(fields: [pilotID], references: [userID])

  Image_Collection Image_Collection[]
}

model Game_Park {
  parkID        Int    @id @default(autoincrement())
  park_name     String @db.VarChar(45)
  park_location String @db.VarChar(45)
  park_address  String @db.VarChar(45)

  Image_Collection Image_Collection[]
}

model Image_Collection {
  collectionID     Int            @id @default(autoincrement())
  parkID           Int
  name             String
  Game_Park        Game_Park      @relation(fields: [parkID], references: [parkID])
  upload_date_time DateTime       @default(now())
  completed        Boolean        @default(false)
  flightID         Int
  Flight_Details   Flight_Details @relation(fields: [flightID], references: [flightID])

  Message Message[]
  Images  Images[]
}

model Message {
  messageID           Int              @id @default(autoincrement())
  message_status      String
  message_description String
  collectionID        Int
  Image_Collection    Image_Collection @relation(fields: [collectionID], references: [collectionID])
}

model Pending_Invites {
  inviteID     Int    @id @default(autoincrement())
  invite_email String @unique
}
