<div class="background" style="background-image: url('assets/mapwallpaper.jpg');">
  <div class="heading">
    Image Catalogue
  </div>
  <aerial-mapping-side-navbar></aerial-mapping-side-navbar>
  <div class="content">

    <div id="searchAndSortContainer">
      <div id="searchBar">
        <mat-form-field [ngStyle]="{ width: '100%', height: '50px'}" class="form">
          <button id="searchBtn" matPrefix mat-icon-button aria-label="Search">
            <mat-icon inline=true>search</mat-icon>
          </button>

          <input (keyup)="searchCatalogues()" (change)="searchCatalogues()" id="searchInput" class="search"
            type="text" placeholder="Search" value="" matInput />
        </mat-form-field>
      </div>

      <span id="sortDropdown">
        <mat-form-field [ngStyle]="{ width: '18%', height: '50px'}" appearance="fill">
          <mat-label id="right" class="sortLabel">Sort By</mat-label>
          <mat-select matInput (change)="onChangeSort($event)" id="left" class="sort" style="display: inline">
            <mat-option [value]="sort.date" selected>Upload Date</mat-option>
            <mat-option [value]="sort.park">Park</mat-option>
          </mat-select>
        </mat-form-field>
      </span>
    </div>

    <div style="height: 85%; overflow-y: auto; margin-top: 2%">
      <mat-card *ngFor="let cat of catalogues" id="{{ cat.collectionID }}">
        <mat-card-header>
          <span style="float: left">{{ cat.name }}</span>
          <span style="float: right">{{ cat.upload_date_time | date }}</span>
        </mat-card-header>
        <br />
        <mat-card-content>
          <ng-container *ngFor="let img of images | slice: 0:3">
            <img style="width: 32%; display: inline-block; padding: 1%" [src]="img.url"
              alt="{{ img.image.file_name }}" />
          </ng-container>
        </mat-card-content>
        <mat-card-footer style="padding: 0px 10px">
          <button class="link tooltip" (click)="enlarge()">View
            <span class="tooltiptext">View images & create maps</span>
          </button>
        </mat-card-footer>
      </mat-card>

      <mat-card class="popup" id="popup" style="overflow-y: none">
        <div class="images" style="overflow-y: auto">
          <mat-card class="imageContainer" *ngFor="let img of images">
            <mat-card-content><img [src]="img.url" alt="{{ img.image.file_name }}" /></mat-card-content>
          </mat-card>
        </div>
        <!-- <a routerLink="/map-collection" class="button">
              <span class="icon"><mat-icon>add</mat-icon></span>
              <span class="text" style="cursor: pointer;">Create New Map</span>
            </a> -->
        <div class="center">
          <button class="link tooltip" routerLink="/map-collection" style="width: 190px">
            Create New Map
            <span class="tooltiptext">Start image stitching</span>
          </button>
          <span style="margin: 10px"></span>
          <button class="link" (click)="closePopup()" style="width: 190px">
            Close
          </button>
        </div>
      </mat-card>
    </div>
  </div>
</div>
